<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 1200px;
            width: 100%;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .search-box {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }

        .search-box input {
            padding: 15px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 50px;
            width: 300px;
            outline: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .search-box button {
            padding: 15px 30px;
            font-size: 1rem;
            background: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            color: #667eea;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .search-box button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }

        .weather-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .weather-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s;
        }

        .weather-card:hover {
            transform: translateY(-5px);
        }

        .main-card {
            grid-column: 1 / -1;
        }

        .location {
            font-size: 1.8rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .date {
            color: #666;
            margin-bottom: 20px;
        }

        .temperature {
            font-size: 4rem;
            font-weight: 700;
            color: #667eea;
            margin: 20px 0;
        }

        .weather-icon {
            font-size: 5rem;
            margin: 20px 0;
        }

        .description {
            font-size: 1.3rem;
            color: #555;
            text-transform: capitalize;
            margin-bottom: 20px;
        }

        .details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detail-label {
            font-weight: 600;
            color: #667eea;
        }

        .detail-value {
            color: #555;
        }

        .error {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            color: #e74c3c;
            font-size: 1.2rem;
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.5rem;
            padding: 40px;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .info-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            display: inline-block;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå§Ô∏è Weather Dashboard</h1>
            <p>Get real-time weather information for any city</p>
            <div class="info-badge">‚ú® No API Key Required - Powered by Open-Meteo</div>
        </div>

        <div class="search-box">
            <input type="text" id="cityInput" placeholder="Enter city name..." />
            <button onclick="searchWeather()">Search</button>
        </div>

        <div id="weatherDisplay"></div>

        <div class="footer">
            <p>Weather Dashboard v1.0 | Deployed via Jenkins CI/CD Pipeline</p>
        </div>
    </div>

    <script>
        const weatherDisplay = document.getElementById('weatherDisplay');
        const cityInput = document.getElementById('cityInput');

        // City coordinates database for geocoding
        const cityCoordinates = {
            'london': { lat: 51.5074, lon: -0.1278, country: 'UK' },
            'new york': { lat: 40.7128, lon: -74.0060, country: 'US' },
            'paris': { lat: 48.8566, lon: 2.3522, country: 'FR' },
            'tokyo': { lat: 35.6762, lon: 139.6503, country: 'JP' },
            'mumbai': { lat: 19.0760, lon: 72.8777, country: 'IN' },
            'delhi': { lat: 28.6139, lon: 77.2090, country: 'IN' },
            'bangalore': { lat: 12.9716, lon: 77.5946, country: 'IN' },
            'chennai': { lat: 13.0827, lon: 80.2707, country: 'IN' },
            'sydney': { lat: -33.8688, lon: 151.2093, country: 'AU' },
            'dubai': { lat: 25.2048, lon: 55.2708, country: 'AE' },
            'singapore': { lat: 1.3521, lon: 103.8198, country: 'SG' },
            'hong kong': { lat: 22.3193, lon: 114.1694, country: 'HK' },
            'los angeles': { lat: 34.0522, lon: -118.2437, country: 'US' },
            'chicago': { lat: 41.8781, lon: -87.6298, country: 'US' },
            'toronto': { lat: 43.6532, lon: -79.3832, country: 'CA' },
            'berlin': { lat: 52.5200, lon: 13.4050, country: 'DE' },
            'madrid': { lat: 40.4168, lon: -3.7038, country: 'ES' },
            'rome': { lat: 41.9028, lon: 12.4964, country: 'IT' },
            'moscow': { lat: 55.7558, lon: 37.6173, country: 'RU' },
            'beijing': { lat: 39.9042, lon: 116.4074, country: 'CN' },
            'shanghai': { lat: 31.2304, lon: 121.4737, country: 'CN' },
            'istanbul': { lat: 41.0082, lon: 28.9784, country: 'TR' },
            'cairo': { lat: 30.0444, lon: 31.2357, country: 'EG' },
            'mexico city': { lat: 19.4326, lon: -99.1332, country: 'MX' },
            'sao paulo': { lat: -23.5505, lon: -46.6333, country: 'BR' },
            'buenos aires': { lat: -34.6037, lon: -58.3816, country: 'AR' },
            'cape town': { lat: -33.9249, lon: 18.4241, country: 'ZA' },
            'seoul': { lat: 37.5665, lon: 126.9780, country: 'KR' },
            'bangkok': { lat: 13.7563, lon: 100.5018, country: 'TH' },
            'jakarta': { lat: -6.2088, lon: 106.8456, country: 'ID' }
        };

        cityInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchWeather();
        });

        async function searchWeather() {
            const city = cityInput.value.trim().toLowerCase();
            if (!city) {
                showError('Please enter a city name');
                return;
            }

            showLoading();

            // Check if city is in our database
            const coords = cityCoordinates[city];
            if (!coords) {
                showError(`City "${city}" not found. Try: London, New York, Paris, Tokyo, Mumbai, Delhi, etc.`);
                return;
            }

            try {
                // Fetch current weather from Open-Meteo (No API Key Required!)
                const weatherUrl = `https://api.open-meteo.com/v1/forecast?latitude=${coords.lat}&longitude=${coords.lon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,weather_code,cloud_cover,pressure_msl,surface_pressure,wind_speed_10m,wind_direction_10m&daily=sunrise,sunset&timezone=auto`;
                
                const response = await fetch(weatherUrl);
                
                if (!response.ok) {
                    throw new Error('Unable to fetch weather data');
                }

                const data = await response.json();
                displayWeather(data, city, coords);
            } catch (error) {
                console.error('Weather API Error:', error);
                showError('Unable to fetch weather data. Please check your internet connection and try again.');
            }
        }

        function showLoading() {
            weatherDisplay.innerHTML = '<div class="loading">üåç Fetching weather data...</div>';
        }

        function showError(message) {
            weatherDisplay.innerHTML = `<div class="error">‚ùå ${message}</div>`;
        }

        function displayWeather(data, cityName, coords) {
            const date = new Date().toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });

            const current = data.current;
            const daily = data.daily;
            
            const temp = Math.round(current.temperature_2m);
            const feelsLike = Math.round(current.apparent_temperature);
            const humidity = current.relative_humidity_2m;
            const windSpeed = current.wind_speed_10m;
            const windDir = current.wind_direction_10m;
            const pressure = current.pressure_msl;
            const cloudCover = current.cloud_cover;
            
            const weatherCode = current.weather_code;
            const weatherInfo = getWeatherInfo(weatherCode);
            
            const sunrise = new Date(daily.sunrise[0]).toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            const sunset = new Date(daily.sunset[0]).toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });

            const cityDisplay = cityName.charAt(0).toUpperCase() + cityName.slice(1);
            
            weatherDisplay.innerHTML = `
                <div class="weather-cards">
                    <div class="weather-card main-card">
                        <div class="location">${cityDisplay}, ${coords.country}</div>
                        <div class="date">${date}</div>
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <div class="temperature">${temp}¬∞C</div>
                                <div class="description">${weatherInfo.description}</div>
                            </div>
                            <div class="weather-icon">${weatherInfo.icon}</div>
                        </div>
                        <div class="details">
                            <div class="detail-item">
                                <span class="detail-label">Feels Like:</span>
                                <span class="detail-value">${feelsLike}¬∞C</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Humidity:</span>
                                <span class="detail-value">${humidity}%</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Wind Speed:</span>
                                <span class="detail-value">${windSpeed} km/h</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Pressure:</span>
                                <span class="detail-value">${pressure} hPa</span>
                            </div>
                        </div>
                    </div>

                    <div class="weather-card">
                        <h3 style="color: #667eea; margin-bottom: 15px;">üå°Ô∏è Temperature</h3>
                        <div class="detail-item">
                            <span class="detail-label">Current:</span>
                            <span class="detail-value">${temp}¬∞C</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Feels Like:</span>
                            <span class="detail-value">${feelsLike}¬∞C</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Humidity:</span>
                            <span class="detail-value">${humidity}%</span>
                        </div>
                    </div>

                    <div class="weather-card">
                        <h3 style="color: #667eea; margin-bottom: 15px;">üí® Wind & Atmosphere</h3>
                        <div class="detail-item">
                            <span class="detail-label">Speed:</span>
                            <span class="detail-value">${windSpeed} km/h</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Direction:</span>
                            <span class="detail-value">${windDir}¬∞</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Cloud Cover:</span>
                            <span class="detail-value">${cloudCover}%</span>
                        </div>
                    </div>

                    <div class="weather-card">
                        <h3 style="color: #667eea; margin-bottom: 15px;">‚òÄÔ∏è Sun Times</h3>
                        <div class="detail-item">
                            <span class="detail-label">Sunrise:</span>
                            <span class="detail-value">${sunrise}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Sunset:</span>
                            <span class="detail-value">${sunset}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Pressure:</span>
                            <span class="detail-value">${pressure} hPa</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function getWeatherInfo(code) {
            const weatherCodes = {
                0: { description: 'Clear sky', icon: '‚òÄÔ∏è' },
                1: { description: 'Mainly clear', icon: 'üå§Ô∏è' },
                2: { description: 'Partly cloudy', icon: '‚õÖ' },
                3: { description: 'Overcast', icon: '‚òÅÔ∏è' },
                45: { description: 'Foggy', icon: 'üå´Ô∏è' },
                48: { description: 'Depositing rime fog', icon: 'üå´Ô∏è' },
                51: { description: 'Light drizzle', icon: 'üå¶Ô∏è' },
                53: { description: 'Moderate drizzle', icon: 'üå¶Ô∏è' },
                55: { description: 'Dense drizzle', icon: 'üåßÔ∏è' },
                61: { description: 'Slight rain', icon: 'üåßÔ∏è' },
                63: { description: 'Moderate rain', icon: 'üåßÔ∏è' },
                65: { description: 'Heavy rain', icon: 'üåßÔ∏è' },
                71: { description: 'Slight snow', icon: 'üå®Ô∏è' },
                73: { description: 'Moderate snow', icon: '‚ùÑÔ∏è' },
                75: { description: 'Heavy snow', icon: '‚ùÑÔ∏è' },
                77: { description: 'Snow grains', icon: '‚ùÑÔ∏è' },
                80: { description: 'Slight rain showers', icon: 'üå¶Ô∏è' },
                81: { description: 'Moderate rain showers', icon: 'üåßÔ∏è' },
                82: { description: 'Violent rain showers', icon: '‚õàÔ∏è' },
                85: { description: 'Slight snow showers', icon: 'üå®Ô∏è' },
                86: { description: 'Heavy snow showers', icon: '‚ùÑÔ∏è' },
                95: { description: 'Thunderstorm', icon: '‚õàÔ∏è' },
                96: { description: 'Thunderstorm with hail', icon: '‚õàÔ∏è' },
                99: { description: 'Thunderstorm with heavy hail', icon: '‚õàÔ∏è' }
            };
            
            return weatherCodes[code] || { description: 'Unknown', icon: 'üå§Ô∏è' };
        }

        // Load default city on page load
        window.onload = () => {
            cityInput.value = 'London';
            setTimeout(() => {
                searchWeather();
            }, 500);
        };
    </script>
</body>
</html>